{% schema %}
{
  "name": "Borne RDC",
  "settings": [
    {
      "type": "text",
      "id": "categories",
      "label": "Catégories (séparées par des virgules)",
      "default": "T-shirts, Débardeurs, Sweatshirts",
      "info": "Les images associées doivent être nommées 'nom_categorie.webp'"
    },
    {
      "type": "collection_list",
      "id": "collections",
      "label": "Collections à afficher",
      "limit": 20
    },
    {
      "type": "textarea",
      "id": "collection_descriptions",
      "label": "Descriptions personnalisées des collections",
      "info": "Format : Collection:Description|etc... "
    },
    {
      "type": "textarea",
      "id": "collection_links",
      "label": "Mapping",
      "info": "Liens des catégories avec les collections. Format : Catégorie:Collection,Collection|etc...",
    },
  ],
  "presets": [
    {
      "name": "Borne RDC",
      "category": "Collection"
    }
  ]
}
{% endschema %}

<div class="rdc-borne">
  <button class="rdc-borne__back-button" data-action="back">
    <span class="rdc-borne__back-icon">&larr;</span> Retour
  </button>

  <!-- Écran 1: Catégories -->
  <div class="rdc-borne__screen" data-screen="1" data-active="true">
    <div class="rdc-borne__content">
      <h1 class="rdc-borne__title">Choisissez votre catégorie</h1>
      <div class="rdc-borne__categories">
        {% assign categories = section.settings.categories | split: ',' %}
        {% for category in categories %}
          {% assign category_clean = category | strip %}
          <div class="rdc-borne__category" data-category="{{ category_clean | handleize }}">
            <div class="rdc-borne__category-inner">
              <img src="{{ category_clean | handleize | append: '.webp' | file_url }}" alt="{{ category_clean }}" class="rdc-borne__category-image">
              <h2 class="rdc-borne__category-title">{{ category_clean }}</h2>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Écran 2 -->
  <div class="rdc-borne__screen" data-screen="2" data-active="false">
    <div class="rdc-borne__content">
      <h1>Produits</h1>
      <div class="rdc-borne__collections"></div>
    </div>
    <button class="rdc-borne__next-button" data-action="next" data-target="3">Suivant</button>
  </div>

  <!-- Écran 3 -->
  <div class="rdc-borne__screen" data-screen="3" data-active="false">
    <div class="rdc-borne__content">
      <h1>Troisième écran</h1>
    </div>
    <button class="rdc-borne__next-button" data-action="next" data-target="4">Suivant</button>
  </div>

  <!-- Écran 4 -->
  <div class="rdc-borne__screen" data-screen="4" data-active="false">
    <div class="rdc-borne__content">
      <h1>Quatrième écran</h1>
    </div>
  </div>
</div>

<script type="application/json" id="rdc-borne-data">
  {{ section.settings.collection_links }}
</script>

{{ 'rdc_borne.css' | asset_url | stylesheet_tag }}
{{ 'rdc_borne.js' | asset_url | script_tag }}